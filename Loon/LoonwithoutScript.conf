#Loon config by qiuxiuya
#æ›´æ–°æ—¶é—´ï¼š2023.8.11
#è¿™æ˜¯qiuxiuyaè‡ªç”¨é…ç½®ï¼Œåˆ é™¤äº†ç­¾åˆ°è„šæœ¬çš„ç‰ˆæœ¬

[General]
sni-sniffing = false
geoip-url = https://github.com/Masaiki/GeoIP2-CN/raw/release/Country.mmdb
fast-switch = true
disable-stun = true
doh3-server = h3://dns.alidns.com/dns-query
disconnect-on-policy-change = true
ipv6 = false
dns-server = 119.29.29.29
disable-udp-ports = 443
allow-wifi-access = false
wifi-access-http-port = 7222
wifi-access-socks5-port = 6153
proxy-test-url = http://www.apple.com/library/test/success.html
test-timeout = 2
interface-mode = auto
switch-node-after-failure-times = 3
resource-parser = https://gitlab.com/lodepuly/vpn_tool/-/raw/main/Resource/Script/Sub-Store/sub-store-parser_for_loon.js
skip-proxy = 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,localhost,*.local,captive.apple.com,e.crashlynatics.com
bypass-tun = 10.0.0.0/8,100.64.0.0/10,127.0.0.0/8,169.254.0.0/16,172.16.0.0/12,192.0.0.0/24,192.0.2.0/24,192.88.99.0/24,192.168.0.0/16,198.51.100.0/24,203.0.113.0/24,224.0.0.0/4,239.255.255.250/32,255.255.255.255/32
real-ip = *.lan, cable.auth.com, *.msftconnecttest.com, *.msftncsi.com, network-test.debian.org, detectportal.firefox.com, resolver1.opendns.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, stun.*, global.turn.twilio.com, global.stun.twilio.com, localhost.*.qq.com, *.logon.battlenet.com.cn, *.logon.battle.net, *.blzstatic.cn, *.cmpassport.com, id6.me, open.e.189.cn, mdn.open.wo.cn, opencloud.wostore.cn, auth.wosms.cn, *.jegotrip.com.cn, *.icitymobile.mobi, *.pingan.com.cn, *.cmbchina.com, *.cmbchina.com.cn, *?miwifi.com, pool.ntp.org, *.pool.ntp.org, ntp.*.com, time.*.com, ntp?.*.com, time?.*.com, time.*.gov, time.*.edu.cn, *.ntp.org.cn, time.*.apple.com, pdc._msdcs.*.*, dc._msdcs.*.*, gc._msdcs.*.*,
allow-udp-proxy = false
[Proxy]
[Remote Proxy]
NetEaseMusicUnlock = https://cdn.jsdelivr.net/gh/qiuxiuya/qiuxiuya@main/NetEaseUnlock.txt,udp=false,fast-open=false,vmess-aead=true,enabled=true

[Proxy Group]
Global = select,HK,TW,Worker,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/Global.png
HK = url-test,HK_Filter,url = http://www.apple.com/library/test/success.html,interval = 600,tolerance = 30,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/HK.png
TW = url-test,TW_Filter,url = http://www.apple.com/library/test/success.html,interval = 600,tolerance = 30,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/TW.png
JP = url-test,JP_Filter,url = http://www.apple.com/library/test/success.html,interval = 600,tolerance = 40,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/JP.png
Proxy = select,All,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/Proxy.png
Worker = select,Workers,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/Cloudflare.png
Unlock = select,ç½‘æ˜“äº‘,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/Netease_Music_Unlock.png
[Remote Filter]
ç½‘æ˜“äº‘ = NameRegex, FilterKey = "(?i).*(ç½‘æ˜“|ç½‘æ˜“äº‘|ç½‘æ˜“äº‘éŸ³ä¹|éŸ³ä¹|äº‘éŸ³ä¹|å®˜ç½‘|æµé‡|åŠ ç¾¤|è®¢é˜…|è·å–|é¸¡åœº|æœºåœº|è®¢è´­|è´­ä¹°|å¥—é¤|é‡ç½®|åˆ†äº«|ç½‘å€|é‚€è¯·|å…¬ä¼—å·|Netease|Music|ğŒğ®ğ¬ğ¢ğœ|Unbolck|Update|music|ğŸµ|ğŸ¶|ğŸ§).*"
All = NameRegex, FilterKey = "^(?=.*(.*))(?!.*((?i)é‚€è¯·|worker|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|åˆ°æœŸ|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|ç¾¤|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|ğŸ®|ç½‘æ˜“|ç½‘æ˜“äº‘|ç½‘æ˜“äº‘éŸ³ä¹|éŸ³ä¹|äº‘éŸ³ä¹|åŠ ç¾¤|é¸¡åœº|è®¢è´­|è´­ä¹°|å¥—é¤|é‡ç½®|åˆ†äº«|å…¬ä¼—å·|Netease|Music|ğŒğ®ğ¬ğ¢ğœ|Unbolck|Update|music|ğŸµ|ğŸ¶|ğŸ§|WARP(\b(GAME|USE|USED|TOTAL|EXPIRE|EMAIL|Panel)\b|(\d{4}-\d{2}-\d{2}|\dG)))).*$"
HK_Filter = NameRegex, FilterKey = "^(?=.*((?i)ğŸ‡­ğŸ‡°|é¦™æ¸¯|(\b(HK|Hong)\b)))(?!.*x).* "
TW_Filter = NameRegex, FilterKey = "^(?=.*((?i)ğŸ‡¹ğŸ‡¼|ğŸ‡¨ğŸ‡³|å°æ¹¾|(\b(TW|Tai|Taiwan)\b)))(?!.*x).* "
SG_Filter = NameRegex, FilterKey = "^(?=.*((?i)ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®|(\b(SG|Singapore)\b)))(?!.*x).* "
JP_Filter = NameRegex, FilterKey = "^(?=.*((?i)ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|(\b(JP|Japan)\b)))(?!.*x).* "

[Proxy Chain]
[Rule]
#è‹¹æœé€šçŸ¥
DOMAIN-SUFFIX,push.apple.com,DIRECT
DOMAIN,identity.apple.com,DIRECT
IP-CIDR,17.249.0.0/16,DIRECT,no-resolve
IP-CIDR,17.252.0.0/16,DIRECT,no-resolve
IP-CIDR,17.57.144.0/22,DIRECT,no-resolve
IP-CIDR,17.188.128.0/18,DIRECT,no-resolve
IP-CIDR,17.188.20.0/23,DIRECT,no-resolve
IP-CIDR6,2620:149:a44::/48,DIRECT,no-resolve
IP-CIDR6,2403:300:a42::/48,DIRECT,no-resolve
IP-CIDR6,2403:300:a51::/48,DIRECT,no-resolve
IP-CIDR6,2a01:b740:a42::/48,DIRECT,no-resolve
#æœ¬åœ°
IP-CIDR,192.168.0.0/16,DIRECT
IP-CIDR,10.0.0.0/8,DIRECT
IP-CIDR,172.16.0.0/12,DIRECT
IP-CIDR,127.0.0.0/8,DIRECT
IP-CIDR,100.64.0.0/10,DIRECT
IP-CIDR,224.0.0.0/4,DIRECT
IP-CIDR6,fe80::/10,DIRECT
FINAL,Global

[Remote Rule]
https://cdn.jsdelivr.net/gh/privacy-protection-tools/anti-AD@master/anti-ad-surge2.txt, policy=REJECT-DROP, tag=ANTI-AD, enabled=true
https://cdn.jsdelivr.net/gh/qiuxiuya/qiuxiuya@main/NetEaseUnlockrule.list, policy=Unlock, tag=NetEaseUnlockrule, enabled=true
https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/ChinaDomain.list, policy=DIRECT, tag=CNDOMAIN, enabled=true
https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/ProxyGFWlist.list, policy=Global, tag=GFW, enabled=true
https://cdn.jsdelivr.net/gh/qiuxiuya/qiuxiuya@main/Geoip.txt, policy=DIRECT, tag=GEOIP, enabled=true

[Rewrite]


[Script]
generic script-path=https://raw.githubusercontent.com/VirgilClyne/Cloudflare/main/js/Cloudflare.1.1.1.1.panel.js, timeout=300, enabled=false, tag=WARP, img-url=cloud
cron "0 0 * * *" script-path=https://github.com/sub-store-org/Sub-Store/releases/latest/download/cron-sync-artifacts.min.js, timeout=300, enabled=false, tag=Sub-StoreåŒæ­¥
[Remote Script]
[Plugin]
https://raw.githubusercontent.com/Script-Hub-Org/Script-Hub/main/modules/script-hub.loon.plugin, enabled=true
https://raw.githubusercontent.com/ClydeTime/Quantumult/main/Task/GetCookie.plugin, enabled=false
https://gitlab.com/lodepuly/vpn_tool/-/raw/main/Tool/Loon/Plugin/BoxJS.plugin, policy=Global, enabled=true
https://raw.githubusercontent.com/qiuxiuya/qiuxiuya/main/Loon/NetEaseMusic.plugin, policy=Unlock, tag=è§£é”ç½‘æ˜“äº‘é»‘èƒ¶éŸ³ä¹è¯•å¬, enabled=true
https://raw.githubusercontent.com/qiuxiuya/qiuxiuya/main/Loon/SpotifyPremium.plugin, enabled=true
https://raw.githubusercontent.com/NobyDa/Script/master/Loon/Loon_TF_Account.plugin, enabled=true
https://raw.githubusercontent.com/chengkongyiban/Loon/main/Loon-Gallery/Dualsub.plugin, enabled=true
https://gitlab.com/lodepuly/vpn_tool/-/raw/main/Tool/Loon/Plugin/Node_detection_tool.plugin, enabled=true
https://cdn.jsdelivr.net/gh/qiuxiuya/qiuxiuya@main/Loon/YouTubeADs.plugin, tag=YouTubeå»å¹¿å‘Š, enabled=true
https://raw.githubusercontent.com/qiuxiuya/qiuxiuya/main/Loon/BiliBili%20Enhanced.plugin, enabled=true
http://script.hub/file/_start_/https://github.com/Keywos/rule/raw/main/module/Sub-Store-Mock.sgmodule/_end_/Sub-Store-Mock.plugin?type=surge-module&target=loon-plugin&del=true&keepHeader=true&jsDelivr=true, enabled=true
https://gitlab.com/lodepuly/vpn_tool/-/raw/main/Tool/Loon/Plugin/Sub-Store.plugin, enabled=true

[MITM]
hostname = -*.apple.com
skip-server-cert-verify = false
h2=true
